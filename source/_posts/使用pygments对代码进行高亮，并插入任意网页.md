---
title: è¿™æ˜¯...åŠ¨æ€ä»£ç æ¡†ï¼Ÿ
date: 2024-04-21 14:20:02
updated: 2024-04-21 14:20:02
tags: [Vercel,python]
cover: https://dolphinsbukets.s3.bitiful.net/article-cover/cover-7.png?fmt=avif
banner: https://dolphinsbukets.s3.bitiful.net/article-cover/cover-7.png?fmt=avif&q=50
description: ä½¿ç”¨pygmentså¯¹ä»£ç è¿›è¡Œé«˜äº®ï¼Œå°†é•¿æ®µä»£ç Embedåˆ°ä½ çš„åšå®¢é‡Œå§
categories: æŠ€æœ¯åˆ†äº«
---

## å‰è¨€
ä¸€ç›´ä»¥æ¥æˆ‘éƒ½é¢ä¸´ç€ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘è¦åœ¨æ–‡ç« ä¸­å¼•ç”¨ä¸€æ®µå¤§å‡ ç™¾è¡Œçš„ä»£ç ï¼Œä¸€çœ¼çœ‹å»mdæ–‡ä»¶é‡Œ5/6éƒ½æ˜¯è‹±æ–‡ï¼Œè¦æ˜¯æœ‰æ”¹åŠ¨è¿˜å¾—æ‰¾åˆ°ä»£ç å¿«å¼€å§‹çš„åœ°æ–¹ä»å¤´è¦†ç›–åˆ°å°¾ã€‚

å‰ä¸€é˜µå­å‘ç°gistï¼Œå¯¹ä»–çš„Embedçˆ±ä¸é‡Šæ‰‹ï¼Œä½†æ˜¯æˆ‘æ‰€å¼•ç”¨çš„æ–‡ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨Githubä»“åº“ä¸Šçš„ï¼Œè€Œå¯¹äºæ™®é€šæ–‡ä»¶å¹¶æ²¡æœ‰EmbedåŠŸèƒ½ã€‚å¦‚æœè¯´ç›´æ¥ç”¨gistçš„è¯æ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨æ—¶æˆ‘åˆè¦æ‰‹åŠ¨å°†æ›´æ”¹è¦†ç›–åˆ°gistä¸Šï¼Œå±®ï¼Œå¤ªç—›äº†ã€‚{% emoji blobcat blobcatcomftears %}

## æ€è·¯

ä»è§£å†³ç—›ç‚¹é—®é¢˜å‡ºå‘ï¼Œæˆ‘è®¤ä¸ºéœ€è¦å…·å¤‡ä»¥ä¸‹åŠŸèƒ½ã€‚{% emoji blobcat blobcatthink %}

1. ç±»ä¼¼gistå¯ä»¥åµŒå…¥åˆ°é¡µé¢ä¸­

2. è‡ªåŠ¨åŒæ­¥æ”¹åŠ¨

å¯¹gistæä¾›åµŒå…¥çš„jsåˆ†æäº†ä¸€ä¸‹ï¼Œå‘ç°å®ƒåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š

1. æ’å…¥ä»£ç åŒºï¼Œè¿™éƒ¨åˆ†åŒ…æ‹¬å·²è¿›è¡Œé«˜äº®çš„ä»£ç 

2. å¼•å…¥css

é‚£æ¥ä¸‹æ¥å°±å¥½åŠäº†ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ–‡ä»¶å†…å®¹è·å–ä¸‹æ¥ï¼Œè¿›è¡Œé«˜äº®åæ˜¾ç¤ºå³å¯ã€‚

ç„¶åä»ç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œèƒ½è¿›è¡Œä»£ç é«˜äº®çš„åº“ï¼Œå‘ç°äº†`highlight(js)`ä»¥åŠ`pygments(py)`ã€‚ å¯¹äºçº¯é™æ€åšå®¢è€Œè¨€ï¼Œè‚¯å®šæ˜¯ä½¿ç”¨`highlight`ç›´æ¥åœ¨å‰ç«¯å¤„ç†å¥½ï¼Œä½†æ˜¯è¿™å¯èƒ½äº§ç”Ÿè·¨åŸŸé—®é¢˜ä»¥åŠå› ä¸ºç½‘ç»œé—®é¢˜æ— æ³•è·å–åˆ°æ–‡ä»¶å†…å®¹ã€‚å†µä¸”ç°åœ¨æ— æœåŠ¡å™¨å‡½æ•°éåœ°èµ°äº†ï¼Œé‚£å°±ç›´æ¥passæ‰å§ã€‚ç¿»äº†ä¸‹`pygments`çš„æ–‡æ¡£ï¼Œå—¯ï¼Œæ‡‚äº†ï¼Œå¼€æ•´ã€‚{% emoji blobcat blobcatbox %}

## å†™code

è¿™ç®€å•ï¼Œè·³è¿‡äº†{% emoji blobcat blobcatsnapped %}

## éƒ¨ç½²ğŸ‡

å› ä¸ºæˆ‘æ˜¯ç›´æ¥ç”¨Vercelçš„cliè¿›è¡Œéƒ¨ç½²çš„ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹

> ä¹Ÿå¯ä»¥ç›´æ¥éƒ¨ç½²: [Develop To Vercel](https://vercel.com/import/project?template=https://github.com/thun888/hightlight-code-api)

{% copy npm install -g vercel prefix:$ %}

ç„¶åç™»å½•

{% copy vercel login prefix:$ %}

å†cloneä¸‹ä»“åº“åˆ°æœ¬åœ°ï¼Œä½ å¯ä»¥æ‰“å¼€`api\main.py`æ¥ä¿®æ”¹ä¸€ä¸‹/åˆ é™¤æä¾›è€…ä¿¡æ¯

{% copy git clone https://github.com/thun888/hightlight-code-api.git prefix:$ %}

{% image https://onep.hzchu.top/mount/pic/myself/2024/04/66249b3e5bb80.webp %}

å¦‚æœ‰éœ€è¦ï¼Œå¯åœ¨`vercel.json`é‡Œé…ç½®å¯ä¿¡æ¥æºï¼Œé˜²æ­¢æ»¥ç”¨

éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

{% copy vercel --prod prefix:$ %}

> è‹¥å‡ºç°VercelæŠ¥é”™`Error: Unable to find any supported Python versions.`è®°å¾—æŠŠé¡¹ç›®çš„nodeç‰ˆæœ¬æ”¹æˆ `18.x`

éšåå¼•ç”¨å³å¯

```html
<script src="https://{yourdomain}/api/v1/generate?url={fileurl}&lang={language}"></script>
```

> {fileurl}ä¸ºæ‰€éœ€å¼•å…¥æ–‡ä»¶çš„é“¾æ¥ï¼Œ{language}ä¸ºå¯¹åº”è¯­è¨€ï¼ˆè‡ªåŠ¨è¯†åˆ«æˆ‘è¯•äº†ä¸‹ç²¾å‡†åº¦å ªå¿§ï¼Œåªå¥½æ‰‹åŠ¨æŒ‡å®š

å¯ä¼ å…¥å‚æ•°ï¼š

| å‚æ•°å    | é»˜è®¤å€¼                 | è§£é‡Š                                  |
| --------- | ---------------------- | ------------------------------------- |
| *code*    | \                      | éœ€è¦çš„é«˜äº®çš„ä»£ç                       |
| *url*     | \                      | éœ€è¦çš„é«˜äº®çš„ä»£ç çš„é“¾æ¥                |
| *lang*    | [ä¸ºç©ºæ—¶æ ¹æ®åç¼€ååˆ¤æ–­] | è¯­è¨€                                  |
| *withcss* | true                   | æ˜¯å¦é™„å¸¦css                           |
| json      | false                  | æ˜¯å¦ä»¥jsonå½¢å¼è¿”å›({"result": "..."}) |

## æ‰©å±•

### æ›´ä¾¿æ·çš„ä½¿ç”¨

å—[@æ˜Ÿæ—¥è¯­](https://weekdaycare.cn/)çš„å¯å‘ï¼Œæˆ‘åšäº†ä¸ªæ’ä»¶ï¼š`hexo-dynamic-codeblock`

å®‰è£…ï¼š{% copy npm install hexo-dynamic-codeblock prefix:$ %}

é…ç½®ï¼š

```yaml _config.yml
dynamic_codeblock:
  loading: true
  showsupporter: true
  api: https://{yourdomain}/api/v1/generate
  css: https://jsd.hzchu.top/gh/thun888/asstes@master/files/pygments-css/default.css
```

> **loadingåªé’ˆå¯¹Stellarä¸»é¢˜**ã€‚åŒæ—¶ï¼Œä¸ºä½¿copycodeæ­£å¸¸å·¥ä½œï¼Œä½ éœ€è¦å°†/js/plugins/copycode.jsä¿®æ”¹ä¸º[è¿™æ ·](/js/plugins/copycode.js)

ä½¿ç”¨ï¼š

```markdown
{% coding [url] [lang] %}
```

åœ¨å…¶å®ƒä¸»é¢˜ä¸­çš„è¡¨ç°ï¼š

![landscape](https://onep.hzchu.top/mount/pic/myself/2024/05/6632074ebf0a9.webp)

ä»ä¼ ç»Ÿæ–¹å¼è¿ç§»ï¼š

â€‹	ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†`<script src="https://hightlight-code-api\.hzchu\.top/api/v1/generate\?url=(.*)&lang=(.*)"></script>`æ›¿æ¢ä¸º`{% coding $1 $2 %}`

## Todo

- [ ] æ·»åŠ  `/preview`

## æ•ˆæœ

è¯¥å¤„å¼•ç”¨æœ¬ç¨‹åºä»£ç 

```html
<script src="https://hightlight-code-api.hzchu.top/api/v1/generate?url=https://raw.githubusercontent.com/thun888/hightlight-code-api/main/api/main.py&lang=python"></script>
```

{% coding https://raw.githubusercontent.com/thun888/hightlight-code-api/main/api/main.py python %}
